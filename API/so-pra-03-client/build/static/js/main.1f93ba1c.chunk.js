(this["webpackJsonpso-pra-03-client"]=this["webpackJsonpso-pra-03-client"]||[]).push([[0],{364:function(e,t,a){e.exports=a(715)},369:function(e,t,a){},370:function(e,t,a){},715:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),o=a(9),s=a.n(o),c=(a(369),a(50)),l=a(51),i=a(53),u=a(52),m=a(54),d=(a(370),a(371),a(31)),p=a.n(d),f=a(61),b=a(726),g=a(722),h=a(13),E=a(165),v=a(34),k=a(723),y=a(724),x=a(718);function w(e){return new Promise((function(t){return setTimeout(t,e)}))}var P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(i.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).onFormSubmit=function(){var e=Object(f.a)(p.a.mark((function e(t,n){var r;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.setSubmitting,n.resetForm,console.log("los valores son "),console.log(t),e.next=5,w(500);case 5:"admin"===t.username&&"admin"===t.password?a.props.onLoginSuccess():b.a.error("Credenciales incorrectas"),r(!1);case 7:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=E.object().shape({username:E.string().required("Username es requerido"),password:E.string().required("Password es requerido")});return r.a.createElement("div",{style:{}},r.a.createElement(g.a,{title:"Login",style:{width:800,margin:"50px auto"}},r.a.createElement(v.b,{validationSchema:e,onSubmit:this.onFormSubmit,initialValues:{username:"",password:""}},(function(){return r.a.createElement(k.a,{layout:"inline"},r.a.createElement(k.a.Item,{label:"Username",name:"username"},r.a.createElement(y.a,{prefix:r.a.createElement(h.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),name:"username",placeholder:"Username"})),r.a.createElement(k.a.Item,{label:"Password",name:"password"},r.a.createElement(y.a,{prefix:r.a.createElement(h.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),name:"password",type:"password",placeholder:"Password"})),r.a.createElement(x.a,null,"Log in"))}))))}}]),t}(r.a.Component),S=a(155),j=a(88),O=a.n(j),I=a(719),M=a(107),D=a(46),L=a(725),C=a(58),N=a(721),T=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).getProcesses=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("soy llamado"),a.setState({tableLoading:!0}),e.prev=2,e.next=5,O.a.get("/cpu");case 5:t=e.sent,(n=t.data).forEach((function(e){return e.key=e.PID})),a.setState({tableLoading:!1,tableDataSource:n}),e.next=17;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("ocurrio un error"),console.log(e.t0),b.a.error("ocurrio un error al obtener los procesos"),a.setState({tableLoading:!1,tableDataSource:[]});case 17:case"end":return e.stop()}}),e,null,[[2,11]])}))),a.state={tableLoading:!1,tableDataSource:[]},a.killProcess=a.killProcess.bind(Object(S.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.getProcesses()}},{key:"killProcess",value:function(){var e=Object(f.a)(p.a.mark((function e(t){var a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("a punto de matar al proceso:",t.name,"con pid:",t.PID),e.next=4,O.a.get("/kill/".concat(t.PID));case 4:a=e.sent,console.log(a),b.a.success("Proceso '".concat(t.Nombre,"' con pid ").concat(t.PID," matado")),this.getProcesses(),e.next=18;break;case 10:e.prev=10,e.t0=e.catch(0),console.log("ocurrio un error"),console.log(e.t0),console.log(e.t0.response.data),console.log(e.t0.response.status),console.log(e.t0.response.headers),b.a.error("No se pudo matar el proceso");case 18:case"end":return e.stop()}}),e,this,[[0,10]])})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[{title:"PID",dataIndex:"PID",key:"key",onFilter:function(e,t){return!0}},{title:"Nombre",dataIndex:"Nombre",key:"Nombre"},{title:"Estado",dataIndex:"Estado",key:"Estado"},{title:"Usuario",dataIndex:"uid",key:"uid"},{title:"Ram",dataIndex:"mm",key:"mm"},{title:"Acciones",key:"action",render:function(t,a){return r.a.createElement("span",null,r.a.createElement(I.a,{title:"Matar este proceso?",okText:"Si",cancelText:"No",onConfirm:function(){e.killProcess(a)}},r.a.createElement("a",null,r.a.createElement(h.a,{type:"close-circle"})," Matar")))}}];return r.a.createElement("div",{style:{background:"white",padding:"8px"}},r.a.createElement(M.a,null,r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Total Procesos",value:this.state.tableDataSource.length})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Running",value:1})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Sleeping",value:2})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Stopped",value:3})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Idle",value:5})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Disk Sleep",value:6})),r.a.createElement(D.a,{xs:{span:5,offset:1},lg:{span:6,offset:2}},r.a.createElement(L.a,{title:"Zombie",value:4}))),r.a.createElement(C.a,{onClick:this.getProcesses},r.a.createElement(h.a,{type:"sync"}),"Actualizar"),r.a.createElement(N.a,{expandedRowRender:function(t){return r.a.createElement(A,{sub:t.sub,killProcess:e.killProcess})},size:"middle",loading:this.state.tableLoading,dataSource:this.state.tableDataSource,columns:t}))}}]),t}(r.a.Component);function A(e){var t=e.sub,a=e.killProcess;if(0===t.length)return r.a.createElement("h3",null,"vacio");var n=[{title:"PID",dataIndex:"PID",key:"key",onFilter:function(e,t){return!0}},{title:"Nombre",dataIndex:"Nombre",key:"Nombre"},{title:"Estado",dataIndex:"Estado",key:"Estado"},{title:"Usuario",dataIndex:"uid",key:"uid"},{title:"Ram",dataIndex:"mm",key:"mm"},{title:"Acciones",key:"action",render:function(e,t){return r.a.createElement("span",null,r.a.createElement(I.a,{title:"Matar este proceso?",okText:"Si",cancelText:"No",onConfirm:function(){a(t)}},r.a.createElement("a",null,r.a.createElement(h.a,{type:"close-circle"})," Matar")))}}];return r.a.createElement(N.a,{size:"middle",dataSource:t,columns:n})}var F=a(720),R=a(42),U=(r.a.Component,function(e){function t(e){var a;Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).lastValue=null,a.charLen=40,a.updateChar=Object(f.a)(p.a.mark((function e(){var t,n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=function(e){return new Promise((function(t){return setTimeout(t,e)}))},e.prev=1,n=p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.a.get("/ram");case 2:return n=e.sent,e.next=5,t(1e3);case 5:a.setState((function(e,t){var a=e.data.slice(1),r={};return r.used=n.data.TotalConsumida||4e6,r.total=n.data.TotalServer||8e6,r.usedMb=r.used/1024,r.totalMb=r.total/1024,r.usage=100*r.used/r.total,a.push(r),{data:a}}));case 6:case"end":return e.stop()}}),e)}));case 3:return e.delegateYield(n(),"t0",5);case 5:e.next=3;break;case 7:e.next=14;break;case 9:e.prev=9,e.t1=e.catch(1),console.log("ocurrio un error"),console.log(e.t1),b.a.error("Ocurrio un error, ya no se pudo actualizar");case 14:case"end":return e.stop()}}),e,null,[[1,9]])})));var n=Array.apply(null,Array(a.charLen)).map((function(e,t){return{totalMb:0,usedMb:0,total:0,used:0,usage:0}}));return a.state={data:n},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.updateChar()}},{key:"render",value:function(){var e=this.state.data[this.state.data.length-1];return r.a.createElement("div",{style:{background:"white",textAlign:"center"}},r.a.createElement(L.a,{title:"Total MB",value:e.totalMb.toFixed(2)}),r.a.createElement(L.a,{title:"Usado MB",value:e.usedMb.toFixed(2)}),r.a.createElement(L.a,{title:"RAM%",value:e.usage.toFixed(2)}),r.a.createElement(R.c,{style:{margin:"0 auto"},width:1200,height:400,data:this.state.data},r.a.createElement(R.b,{type:"monotone",dataKey:"usedMb",stroke:"blue"}),r.a.createElement(R.a,{stroke:"#ccc"}),r.a.createElement(R.d,null),r.a.createElement(R.e,{domain:[0,parseInt(e.totalMb,10)]})))}}]),t}(r.a.Component)),q=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(i.a)(this,Object(u.a)(t).call(this,e))).onLoginSuccess=function(){a.setState({logged:!0})},a.state={logged:!1},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},!this.state.logged&&r.a.createElement(P,{onLoginSuccess:this.onLoginSuccess}),this.state.logged&&r.a.createElement(F.a,{dotPosition:"top"},r.a.createElement("div",{key:"1"},r.a.createElement("h3",null,"Procesos"),r.a.createElement(T,null)),r.a.createElement("div",{key:"3"},r.a.createElement("h3",null,"Ram"),r.a.createElement(U,null))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[364,1,2]]]);
//# sourceMappingURL=main.1f93ba1c.chunk.js.map